{{! templates/item-v2.hbs - Updated with slot values and refined types }}
<div class="item-sheet-container">
    <header class="sheet-header">
        <img src="{{#if item.img}}{{item.img}}{{else}}{{defaultIcon}}{{/if}}" data-edit="img" title="{{item.name}}" height="64" width="64"/>
        <h1><input name="name" type="text" value="{{item.name}}" placeholder="Item Name"/></h1>
    </header>

    <section class="sheet-body">
        {{! Weapon-specific fields }}
        {{#if (eq item.type "weapon")}}
            <div class="form-group">
                <label>Weapon Type</label>
                <select name="system.weaponType" data-action="updateWeaponType">
                    {{#each WEAPON_TYPES as |type id|}}
                        <option value="{{id}}" {{#if (eq ../system.weaponType id)}}selected{{/if}}>{{type.label}}</option>
                    {{/each}}
                </select>
            </div>

            {{#if (or (eq system.weaponType "hand") (eq system.weaponType "long"))}}
            <div class="form-group">
                <label>
                    <input type="checkbox" name="system.isTwoHanded" {{checked system.isTwoHanded}}/>
                    Two-Handed
                </label>
                <span>Use weapon with both hands for +1 damage</span>
            </div>
            {{/if}}

            {{#if (eq system.weaponType "throwing")}}
            <div class="form-group">
                <label>
                    <input type="checkbox" name="system.inMelee" {{checked system.inMelee}}/>
                    In Melee Range
                </label>
                <span>Weapon is being used in melee combat (-1 damage penalty)</span>
            </div>
            {{/if}}

            <div class="form-group">
                <label>
                    <input type="checkbox" name="system.equipped" {{checked system.equipped}}/>
                    Equipped
                </label>
                <span>Equip this weapon</span>
            </div>

            <div class="form-group">
                <label>Slot Value</label>
                <input type="number" name="system.slotValue" value="{{system.slotValue}}" min="0" step="1"/>
                <small>How many inventory slots this weapon occupies</small>
            </div>
        {{/if}}

        {{! Armor-specific fields }}
        {{#if (eq item.type "armor")}}
            <div class="form-group">
                <label>Armor Type</label>
                <select name="system.armorType" data-action="updateArmorType">
                    {{#each ARMOR_TYPES as |type id|}}
                        <option value="{{id}}" {{#if (eq ../system.armorType id)}}selected{{/if}}>{{type.label}}</option>
                    {{/each}}
                </select>
            </div>
            <div class="form-group">
                <label>
                    <input type="checkbox" name="system.equipped" {{checked system.equipped}}/>
                    Equipped
                </label>
                <span>Wear this {{#if (eq system.armorType "shield")}}shield{{else}}armor{{/if}}</span>
            </div>

            <div class="form-group">
                <label>Slot Value</label>
                <input type="number" name="system.slotValue" value="{{system.slotValue}}" min="0" step="1"/>
                <small>How many inventory slots this {{#if (eq system.armorType "shield")}}shield{{else}}armor{{/if}} occupies</small>
            </div>
        {{/if}}

        {{! Advancement-specific fields }}
        {{#if (eq item.type "advancement")}}
            <div class="form-group">
                <label>Advancement Type</label>
                <select name="system.advancementType" data-action="updateAdvancementType">
                    {{#each ADVANCEMENT_TYPES as |type id|}}
                        <option value="{{id}}" {{#if (eq ../system.advancementType id)}}selected{{/if}}>{{type.label}}</option>
                    {{/each}}
                </select>
            </div>

            <div class="form-group">
                <label>
                    <input type="checkbox" name="system.equipped" {{checked system.equipped}}/>
                    Active
                </label>
                <span>This advancement is currently benefiting the character</span>
            </div>
        {{/if}}

        {{! Consequence-specific fields }}
        {{#if (eq item.type "consequence")}}
            <div class="form-group">
                <label>Consequence Type</label>
                <select name="system.consequenceType" data-action="updateConsequenceType">
                    {{#each CONSEQUENCE_TYPES as |type id|}}
                        <option value="{{id}}" {{#if (eq ../system.consequenceType id)}}selected{{/if}}>{{type.label}}</option>
                    {{/each}}
                </select>
            </div>

            <div class="form-group">
                <label>
                    <input type="checkbox" name="system.active" {{checked system.active}}/>
                    Active
                </label>
                <span>This consequence is currently hindering the character</span>
            </div>
        {{/if}}

        {{! Loot-specific fields }}
        {{#if (eq item.type "loot")}}
            <div class="form-group">
                <label>Loot Type</label>
                <select name="system.lootType" data-action="updateLootType">
                    {{#each LOOT_TYPES as |type id|}}
                        <option value="{{id}}" {{#if (eq ../system.lootType id)}}selected{{/if}}>{{type.label}}</option>
                    {{/each}}
                </select>
            </div>

            <div class="form-group">
                <label>Value (Gold Pieces)</label>
                <input type="number" name="system.value" value="{{system.value}}" min="0" step="0.01"/>
                <small>Monetary value in gold pieces</small>
            </div>

            <div class="form-group">
                <label>Slot Value</label>
                <input type="number" name="system.slotValue" value="{{system.slotValue}}" min="0" step="1"/>
                <small>How many inventory slots this item occupies</small>
            </div>
        {{/if}}

        {{! Description field for all items - Now as textarea }}
        <div class="form-group description-group">
            <label>Description</label>
            <textarea name="system.description" rows="3" placeholder="Enter item description...">{{system.description}}</textarea>
            <small>Describe this item's properties, effects, and special characteristics</small>
        </div>
    </section>
</div>